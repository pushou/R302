<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.28.0/themes/prism.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.14.3/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@6.7.0"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.14.3"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.14.3/dist/index.umd.min.js"></script><script>(r => {
                setTimeout(r);
              })(() => {
  const {
    markmap,
    mm
  } = window;
  const toolbar = new markmap.Toolbar();
  toolbar.attach(mm);
  const el = toolbar.render();
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root, jsonOptions) => {
        const markmap = getMarkmap();
        window.mm = markmap.Markmap.create('svg#mindmap', (getOptions || markmap.deriveOptions)(jsonOptions), root);
      })(() => window.markmap,null,{"type":"root","depth":0,"content":"","children":[{"type":"heading","depth":1,"payload":{"lines":[0,1]},"content":"Commandes Linux (AS+LABEL)","children":[{"type":"bullet_list","depth":2,"payload":{"lines":[2,3]},"content":"","children":[{"type":"list_item","depth":3,"payload":{"lines":[2,3]},"content":"mtr"}]},{"type":"fence","depth":2,"content":"<pre class=\"language-bash\"><code class=\"language-bash\">  <span class=\"token function\">mtr</span> <span class=\"token parameter variable\">--tcp</span> <span class=\"token parameter variable\">--port</span> <span class=\"token number\">443</span> --show-ips <span class=\"token parameter variable\">--mpls</span> <span class=\"token parameter variable\">--aslookup</span> <span class=\"token parameter variable\">--curses</span> www.umontpellier.fr\n  <span class=\"token function\">mtr</span> <span class=\"token parameter variable\">-P</span> <span class=\"token number\">443</span> <span class=\"token parameter variable\">-T</span>  <span class=\"token parameter variable\">-b</span> <span class=\"token parameter variable\">-e</span> <span class=\"token parameter variable\">-z</span> <span class=\"token parameter variable\">-t</span> <span class=\"token number\">194.199</span>.227.220\n  <span class=\"token function\">mtr</span>  <span class=\"token parameter variable\">-P</span> <span class=\"token number\">443</span> <span class=\"token parameter variable\">-T</span> <span class=\"token parameter variable\">-c</span> <span class=\"token number\">2</span>  <span class=\"token parameter variable\">-b</span> <span class=\"token parameter variable\">-e</span> <span class=\"token parameter variable\">-z</span> <span class=\"token parameter variable\">-t</span> <span class=\"token parameter variable\">-j</span> <span class=\"token number\">194.199</span>.227.220 <span class=\"token operator\">|</span> from json<span class=\"token operator\">|</span>flatten<span class=\"token operator\">|</span>get hubs<span class=\"token operator\">|</span>flatten\n</code></pre>\n"},{"type":"bullet_list","depth":2,"payload":{"lines":[8,9]},"content":"","children":[{"type":"list_item","depth":3,"payload":{"lines":[8,9]},"content":"traceroute"}]},{"type":"fence","depth":2,"content":"<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">traceroute</span> <span class=\"token parameter variable\">-A</span> <span class=\"token parameter variable\">-n</span> <span class=\"token parameter variable\">-e</span> <span class=\"token parameter variable\">-i</span> eth0 <span class=\"token number\">8.8</span>.8.8\n</code></pre>\n"}]},{"type":"heading","depth":1,"payload":{"lines":[13,14]},"content":"Commandes Cisco","children":[{"type":"heading","depth":2,"payload":{"lines":[15,16]},"content":"mpls config","children":[{"type":"bullet_list","depth":3,"payload":{"lines":[17,27]},"content":"","children":[{"type":"list_item","depth":4,"payload":{"lines":[17,22]},"content":"<pre class=\"language-ios\"><code class=\"language-ios\"># cef améliore les performances de MPLS(distributed c'est mieux) \nconf t\n   ip cef distributed\n</code></pre>\n"},{"type":"list_item","depth":4,"payload":{"lines":[22,23]},"content":"AutoConfig LDP"}]},{"type":"bullet_list","depth":3,"payload":{"lines":[29,30]},"content":"","children":[{"type":"list_item","depth":4,"payload":{"lines":[29,30]},"content":"Déclarer l'usage de MPLS sur une interface"}]},{"type":"fence","depth":3,"content":"<pre class=\"language-ios\"><code class=\"language-ios\">  interface FastEthernet2/0\n         mpls ip\n\n</code></pre>\n"}]},{"type":"heading","depth":2,"payload":{"lines":[36,37]},"content":"Configuration d'un provider (=LSR) L3VPN","children":[{"type":"fence","depth":3,"content":"<pre class=\"language-ios\"><code class=\"language-ios\">interface Loopback2\n ip address 2.2.2.2 255.255.255.255\n!\ninterface FastEthernet0/0\n ip address 10.0.12.2 255.255.255.252\n duplex auto\n speed auto\n mpls ip\n!\ninterface FastEthernet1/0\n ip address 10.0.23.2 255.255.255.252\n duplex auto\n speed auto\n mpls ip\n!\ninterface FastEthernet2/0\n ip address 10.0.24.2 255.255.255.252\n duplex auto\n speed auto\n mpls ip\n!\nrouter ospf 1\n router-id 2.2.2.2\n log-adjacency-changes\n network 2.2.2.0 0.0.0.255 area 0\n network 10.0.12.0 0.0.0.3 area 0\n network 10.0.23.0 0.0.0.3 area 0\n network 10.0.24.0 0.0.0.3 area 0\n network 0.0.0.0 255.255.255.255 area 0\n!\n</code></pre>\n"}]},{"type":"heading","depth":2,"payload":{"lines":[71,72]},"content":"Configuration d'un PE (=LER) L3VPN","children":[{"type":"fence","depth":3,"content":"<pre class=\"language-ios\"><code class=\"language-ios\">interface Loopback3\n ip address 3.3.3.3 255.255.255.255\n!\ninterface FastEthernet0/0\n ip address 10.0.23.1 255.255.255.252\n duplex auto\n speed auto\n mpls ip\n!\ninterface FastEthernet1/0\n ip vrf forwarding custA\n ip address 192.168.3.3 255.255.255.0\n duplex auto\n speed auto\n!         \ninterface FastEthernet2/0\n ip vrf forwarding custC\n ip address 192.168.3.3 255.255.255.0\n duplex auto\n speed auto\n!\nrouter eigrp 1\n no auto-summary\n !\n address-family ipv4 vrf custA\n  redistribute bgp 200\n  network 3.3.3.0 0.0.0.255\n  network 192.168.3.0\n  default-metric 10000 100 255 1 1500\n  auto-summary\n  autonomous-system 10\n exit-address-family\n!\nrouter ospf 2 vrf custC\n log-adjacency-changes\n redistribute bgp 200 metric 200 subnets\n network 3.3.3.0 0.0.0.255 area 0\n network 192.168.3.0 0.0.0.255 area 0\n!\nrouter ospf 1\n router-id 3.3.3.3\n log-adjacency-changes\n network 3.3.3.0 0.0.0.255 area 0\n network 10.0.23.0 0.0.0.3 area 0\n!\nrouter bgp 200\n no bgp default ipv4-unicast\n bgp log-neighbor-changes\n neighbor 1.1.1.1 remote-as 200\n neighbor 1.1.1.1 update-source Loopback3\n neighbor 4.4.4.4 remote-as 200\n neighbor 4.4.4.4 update-source Loopback3\n !\n address-family ipv4\n  neighbor 1.1.1.1 activate\n  neighbor 4.4.4.4 activate\n  no auto-summary\n  no synchronization\n exit-address-family\n !\n address-family vpnv4\n  neighbor 1.1.1.1 activate\n  neighbor 1.1.1.1 send-community extended\n  neighbor 4.4.4.4 activate\n  neighbor 4.4.4.4 send-community extended\n exit-address-family\n !\n address-family ipv4 vrf custC\n  redistribute ospf 2 vrf custC\n  no synchronization\n exit-address-family\n !\n address-family ipv4 vrf custA\n  redistribute eigrp 10\n  no synchronization\n exit-address-family\n!\n</code></pre>\n"}]},{"type":"heading","depth":2,"payload":{"lines":[152,153]},"content":"Debug mpls","children":[{"type":"fence","depth":3,"content":"<pre class=\"language-ios\"><code class=\"language-ios\">  sh mpls forwarding-table  \n  Local  Outgoing    Prefix            Bytes tag  Outgoing   Next Hop    \n  tag    tag or VC   or Tunnel Id      switched   interface              \n  16     Pop tag     10.0.24.0/30      0          Fa2/0      10.0.12.2    \n  17     Pop tag     10.0.23.0/30      0          Fa2/0      10.0.12.2    \n  18     Pop tag     2.2.2.2/32        0          Fa2/0      10.0.12.2    \n  19     16          3.3.3.3/32        0          Fa2/0      10.0.12.2    \n  20     17          4.4.4.4/32        0          Fa2/0      10.0.12.2    \n  21     Untagged    5.0.0.0/8[V]      0          Fa1/0      192.168.1.5  \n  22     Aggregate   192.168.1.0/24[V] 0                                  \n  23     Untagged    6.0.0.0/8[V]      0          Fa3/0      192.168.1.6  \n  24     Aggregate   192.168.1.0/24[V] 0                                  \n  25     Untagged    11.11.11.11/32[V] 0          Fa0/0      192.168.1.11 \n  26     Aggregate   192.168.1.0/24[V] 0    \n</code></pre>\n"}]},{"type":"heading","depth":2,"payload":{"lines":[170,171]},"content":"debug ldp","children":[{"type":"fence","depth":3,"content":"<pre class=\"language-ios\"><code class=\"language-ios\">show tag-switching tdp neighbor \n  Peer LDP Ident: 2.2.2.2:0; Local LDP Ident 1.1.1.1:0\n    TCP connection: 2.2.2.2.62837 - 1.1.1.1.646\n    State: Oper; Msgs sent/rcvd: 141/142; Downstream\n    Up time: 01:55:58\n    LDP discovery sources:\n     FastEthernet2/0, Src IP addr: 10.0.12.2\n        Addresses bound to peer LDP Ident:\n          10.0.12.2       2.2.2.2         10.0.23.2       10.0.24.2     \n</code></pre>\n"}]},{"type":"heading","depth":2,"payload":{"lines":[185,186]},"content":"Vérifiez la correspondance label-fec","children":[{"type":"fence","depth":3,"content":"<pre class=\"language-ios\"><code class=\"language-ios\">R1#show tag-switching tdp neighbor \n  Peer LDP Ident: 2.2.2.2:0; Local LDP Ident 1.1.1.1:0\n   TCP connection: 2.2.2.2.62837 - 1.1.1.1.646\n   State: Oper; Msgs sent/rcvd: 141/142; Downstream\n   Up time: 01:55:58\n  LDP discovery sources:\n   FastEthernet2/0, Src IP addr: 10.0.12.2\n      Addresses bound to peer LDP Ident:\n        10.0.12.2       2.2.2.2         10.0.23.2       10.0.24.2     \n</code></pre>\n"}]},{"type":"heading","depth":2,"payload":{"lines":[198,199]},"content":"Vérifiez la forwarding table","children":[{"type":"fence","depth":3,"content":"<pre class=\"language-ios\"><code class=\"language-ios\">show tag-switching forwarding-table \n  Local  Outgoing    Prefix            Bytes tag  Outgoing   Next Hop    \n  tag    tag or VC   or Tunnel Id      switched   interface              \n  16     Pop tag     10.0.24.0/30      0          Fa0/0      10.0.23.2    \n  17     Pop tag     2.2.2.2/32        0          Fa0/0      10.0.23.2    \n  18     17          4.4.4.4/32        0          Fa0/0      10.0.23.2    \n  19     Pop tag     10.0.12.0/30      0          Fa0/0      10.0.23.2    \n  20     18          1.1.1.1/32        0          Fa0/0      10.0.23.2    \n  21     Untagged    7.0.0.0/8[V]      0          Fa1/0      192.168.3.7  \n  22     Aggregate   192.168.3.0/24[V] 0                                  \n  23     Untagged    9.9.9.9/32[V]     0          Fa2/0      192.168.3.9  \n  24     Untagged    10.10.10.10/32[V] 0          Fa2/0      192.168.3.9  \n  25     Aggregate   192.168.3.0/24[V] 0                                  \n  26     Untagged    192.168.4.0/24[V] 0          Fa2/0      192.168.3.9  \n  27     Untagged    192.168.90.0/24[V]0          Fa2/0      192.168.3.9     \n</code></pre>\n"}]}]}],"payload":{}},{"colorFreezeLevel":2,"maxWidth":800})</script>
</body>
</html>
